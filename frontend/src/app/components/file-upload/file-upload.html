<div class="upload-container">
  <h2>PrzesyÅ‚anie pliku ZIP</h2>

  <div class="upload-section">
    <div class="file-input-wrapper">
      <input
        type="file"
        (change)="onFileSelected($event)"
        accept=".zip"
        id="fileInput"
        class="file-input"
      />
      <label for="fileInput" class="file-label">
        ğŸ“ Wybierz plik ZIP
      </label>
      <span class="file-name" *ngIf="selectedFile">
        {{ selectedFile.name }} ({{ formatFileSize(selectedFile.size) }})
      </span>
    </div>

    <button
      (click)="uploadFile()"
      [disabled]="!selectedFile || isUploading"
      class="upload-button"
    >
      {{ isUploading ? 'PrzesyÅ‚anie...' : 'PrzeÅ›lij plik' }}
    </button>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    âš ï¸ {{ errorMessage }}
  </div>

  <div class="response-section" *ngIf="uploadResponse">
    <div class="success-header">
      <span class="success-icon">âœ…</span>
      <h3>{{ uploadResponse.message }}</h3>
    </div>

    <div class="summary-grid">
      <div class="summary-card">
        <div class="summary-label">Nazwa pliku</div>
        <div class="summary-value">{{ uploadResponse.fileName }}</div>
      </div>
      <div class="summary-card">
        <div class="summary-label">Rozmiar archiwum</div>
        <div class="summary-value">{{ formatFileSize(uploadResponse.fileSize!) }}</div>
      </div>
      <div class="summary-card">
        <div class="summary-label">Liczba plikÃ³w</div>
        <div class="summary-value highlight">{{ uploadResponse.filesCount }}</div>
      </div>
      <div class="summary-card">
        <div class="summary-label">Data przetworzenia</div>
        <div class="summary-value">{{ uploadResponse.processedAt | date:'medium' }}</div>
      </div>
    </div>

    <div class="files-list" *ngIf="uploadResponse.files && uploadResponse.files.length > 0">
      <h4>ğŸ“‚ ZawartoÅ›Ä‡ archiwum ({{ uploadResponse.filesCount }} plikÃ³w):</h4>
      <div class="file-item" *ngFor="let file of uploadResponse.files">
        <div class="file-header">
          <span class="file-icon">
            {{ file.fileType === 'JSON' ? 'ğŸ“„' : file.fileType === 'Word Document' ? 'ğŸ“' : file.fileType === 'Certificate' ? 'ğŸ”' : 'ğŸ“' }}
          </span>
          <span class="file-name-display">{{ file.fileName }}</span>
          <span class="file-type-badge">{{ file.fileType }}</span>
        </div>
        <div class="file-details">
          <span>ğŸ“ {{ file.fullPath }}</span>
          <span>ğŸ“ {{ formatFileSize(file.fileSize) }}</span>
          <span>ğŸ—œï¸ {{ formatFileSize(file.compressedSize) }}</span>
          <span>ğŸ“… {{ file.lastModified | date:'short' }}</span>
        </div>
        <div class="file-content" *ngIf="file.content">
          <details>
            <summary>ğŸ“ PodglÄ…d zawartoÅ›ci JSON</summary>
            <pre>{{ file.content | json }}</pre>
          </details>
        </div>
      </div>
    </div>

    <div class="empty-archive" *ngIf="!uploadResponse.files || uploadResponse.files.length === 0">
      <p>ğŸ“­ Archiwum jest puste lub nie zawiera obsÅ‚ugiwanych plikÃ³w.</p>
    </div>
  </div>
</div>


