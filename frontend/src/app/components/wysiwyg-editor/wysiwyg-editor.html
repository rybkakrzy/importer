<div class="wysiwyg-editor-wrapper">
  <div class="pages-container">
    <!-- Każda strona A4 -->
    @for (page of pages(); track $index) {
      <div class="page-wrapper">
        <div class="page" 
             [class.landscape]="pageOrientation === 'landscape'"
             [attr.data-page-number]="$index + 1">
          
          <!-- Nagłówek strony -->
          <div class="page-header"
               [class.editing]="editingSection() === 'header'"
               [style.height.cm]="headerHeight()"
               [style.padding-left.px]="pageMargins.left * 37.8"
               [style.padding-right.px]="pageMargins.right * 37.8"
               (click)="startEditingHeader()"
               (dblclick)="startEditingHeader()">
            @if (editingSection() === 'header' && $index === 0) {
              <div 
                #headerContent
                class="header-editor-content"
                contenteditable="true"
                spellcheck="true"
                [attr.placeholder]="'Kliknij, aby edytować nagłówek'"
                (blur)="onHeaderBlur()"
                (input)="onHeaderInput($event)"
              ></div>
            } @else {
              <div class="header-display" [innerHTML]="getHeaderContent($index)"></div>
            }
          </div>
          
          @if ($index === 0) {
            <div 
              #editorContent
              class="editor-content"
              contenteditable="true"
              spellcheck="true"
              [attr.placeholder]="'Zacznij pisać...'"
              [style.padding-left.px]="pageMargins.left * 37.8"
              [style.padding-right.px]="pageMargins.right * 37.8"
              [style.padding-top.px]="8"
              [style.padding-bottom.px]="8"
              (mouseup)="saveSelection()"
              (keyup)="saveSelection()"
              (click)="stopEditingHeaderFooter()"
            ></div>
          } @else {
            <div class="page-overflow-content"
                 [style.padding-left.px]="pageMargins.left * 37.8"
                 [style.padding-right.px]="pageMargins.right * 37.8"
                 [style.padding-top.px]="8"
                 [style.padding-bottom.px]="8"
                 [innerHTML]="page"
                 (click)="stopEditingHeaderFooter()">
            </div>
          }

          <!-- Stopka strony -->
          <div class="page-footer"
               [class.editing]="editingSection() === 'footer'"
               [style.height.cm]="footerHeight()"
               [style.padding-left.px]="pageMargins.left * 37.8"
               [style.padding-right.px]="pageMargins.right * 37.8"
               (click)="startEditingFooter()"
               (dblclick)="startEditingFooter()">
            @if (editingSection() === 'footer' && $index === 0) {
              <div 
                #footerContent
                class="footer-editor-content"
                contenteditable="true"
                spellcheck="true"
                [attr.placeholder]="'Kliknij, aby edytować stopkę'"
                (blur)="onFooterBlur()"
                (input)="onFooterInput($event)"
              ></div>
            } @else {
              <div class="footer-display" [innerHTML]="getFooterContent($index)"></div>
            }
          </div>
        </div>
        
        <!-- Separator między stronami - styl Google Docs -->
        @if ($index < pages().length - 1) {
          <div class="page-separator"></div>
        }
      </div>
    }
  </div>
</div>
